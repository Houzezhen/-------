
# 任务书
## 任务要求
	本任务是设计并实现一款一人一题抢答器电路，具体要求如下：
	1.采用 Multsim 设计一个抢答电路和倒计时电路，实现能同时供一人抢答一题。
	2.主持人有控制开关，可以手动清零复位。当主持人按下开始按键时才可以抢答。显示倒计时10秒，规定时间内抢答有效，同时倒计时停止，直到主持人将系统清零为止。
	3.当倒计时为“00”后选手答题超时，会有 LED 亮起，提示超时。
	4.电路必须能够通过硬件电路实现，不得采用微处理器编程实现。
 ## 任务背景
  现在需要设计并实现一款抢答器电路，用于供学生进行课堂互动和竞赛等活动。这款电路需要能够同时供一人抢答一题，并且主持人可以预置抢答后选手作答时间。电路必须能够通过硬件电路实现，不得采用微处理器编程实现。此外，硬件验证时需要标注姓名和学号，以便于任务评审。
## 实现情况
1.实现了抢答功能，主持人按开始抢答后可以抢答，并开始十秒倒计时，当一人抢答完抢答倒计时停止且其他人不能抢答。
2.在十秒内无人抢答时会有 LED 报警提示。
3.有选手抢答后，答题倒计时开始，答题倒计时由主持人设定，答题倒计时结束后红灯亮起，表示答题超时。
## 摘要
  本次课设旨在设计一个七人抢答电路，实现多人抢答、倒计时、报警等功能。采用Multisim仿真电路进行设计，用嘉立创PCB打板实现硬件验证。主要方法是通过逻辑电路的设计，实现多人抢答和倒计时功能，同时在硬件实现中加入LED报警功能。在实验过程中，成功实现了抢答、倒计时、报警等功能，并经过了嘉立创PCB硬件验证。设计的主要创新点在于实现了多人抢答的同时，添加了倒计时和报警功能，使得整个系统更加完善。通过本次课设的设计和实现，验证了逻辑电路设计的可行性，同时提高了个人的实践能力和创新思维能力。



# 一、系统设计

总体设计方案比较
	第一种：
分为三个模块：
抢答模块；倒计时分为主持人自定义倒计时；抢答十秒倒计时
第二种：分为两个模块：
	抢答模块；抢答十秒倒计时和主持人自定义倒计时共用一个模块
	选择了第一种，理由：
第一种逻辑性更简单，设计起来更不耗时间。第二种需要在十秒倒计时和自定义倒计时之间切换，中间数据保存可能需要更多芯片，反而增大工作量。
主持人自定义倒计时时间方案
	1.是拨码开关设定时间，
	2.是用按键累加设定时间。
	我认为使用按键累加的方案较好
	拨码开关为多输入，需要更多芯片更多线路，更大的空间，工程量变大。拨码开关占用较大体积，不利于板子小型化，而使用按键累加的方案只要一个按键就可以达到好几个拨码开关才能达到的效果。
## 硬件实现方案
	1.使用洞洞板飞线焊接
	2.使用腐蚀覆铜板完成
	3.使用PCB工厂打板
	选择第三种
		1.完成电路的仿真设计后我发现线路过于繁琐，光五个数码管就要接五个译码器三十几根线。所以洞洞板的可实现度太低，并且不符合生产生活实际。这是之前的模电课设，一个简单的ocl功率放大电路就占了很多空间，可见用洞洞板制作可实现性不高。      

   工厂打板设备条件好，并且会帮忙打孔，省去很多工作量。工厂PCB会进行阻焊层覆盖，不容易焊歪。并且工厂板可以进行铺铜操作，这次我打了两层板，全部对gnd网络进行铺铜，可以免去许多信号干扰。本次使用立创eda画PCB，可以在嘉立创免费打板，因此也从经济上节省了成本。下面就是本人的七路抢答器课设，可以看出元器件多，并且内部走线并不简洁，使用上面两种方法实现度不高，只有pcb能较好的实现。  
   ![image](https://github.com/user-attachments/assets/e1ce3b8e-fc90-47f3-8ec0-bba87a825d98)
##   各个模块的核心原理设计：
（此部分仅为各模块的逻辑原理，详细的电路逻辑分析见后文单元电路设计）
### 抢答模块：
当有选手抢答时74ls373锁存端输出控制引脚（原理图中eng）由高变低,将输入数据锁存这时其他选手无法抢答。  
### 主持人自定义倒计时：
计数器使用74LS190N级联，计数模式为正计数和倒计时两种模式，可以切换。清零按键按下载入引脚（仿真中load）低电平达到归零的效果，计数方式控制端引脚（仿真中U/D）为低电平进入正计数模式，此时靠按键按下产生的脉冲可以计数。抢答模式中，不能正计数，有选手抢答后开始倒计时模式，计时脉冲靠555定时器发出。当数码管显示为00时停止计时，两个190的载入（load）引脚被拉到低电平，置数输入端，锁死00达到停止计时的效果。  
### 抢答十秒倒计时：
同样使用两个74LS190N芯片级联，按下开始键，两个芯片的load（载入脚）脚被拉到低电平，使输出端与输入的BCD码同步，开始10秒倒计时，到00时芯片的13号引脚rco输出低电平，此信号与555定时器的脉冲信号相与输入时钟信号端clk，因此rco为低电平时停止计时，使倒计时停止。  

# 单元电路设计

## 时钟信号的生成：
使用555定时器产生1hz方波的脉冲信号，根据计算公式得到要添加的电容和电阻T=ln2 * ( R7+ 2*R6 ) *C1

![image](https://github.com/user-attachments/assets/bc529e5f-abfd-4aff-9f8a-1058bd62a667)

图.555定时器方波发生电路
计数器级联：
190有超前进位功能。当计数溢出时，进位/错位输出端(RCO)输出一一个低电平脉冲，其宽度为CP脉冲周期的高电平脉冲:行波时钟输出端(RC)输出一个宽度等于CP低电平部分的低电平脉冲。
利用RC端，可级联成N位同步计数器。当采用并行CP
控制时，则将RC接到后级CT ;当采用并行CT控制时，
则将RC接到后-级CP。  
![image](https://github.com/user-attachments/assets/dac52da9-36d2-45cc-82d4-4faeb884b4b7)

图.74ls190计数器级联

抢答模块：
抢答模块设计，使用了74ls373锁存器。373的输入端接上拉电阻，当无选手按下按钮时，373输入输出全部为高电平。
373的eng接若干或门，373输出端接多输入与门输入端，与门输出端级联或门输入端。当无人抢答时或门输出为高电平，eng高电平时373的输出端和输入端同步，eng低电平时373输入端呈现出高阻态，输出端维持原来的输出不随输出端改变。有人抢答时，373输出端改变，与门输出低电平，eng被拉低，输出端被锁死到这一选手抢答的号数，且其他选手无法抢答，达到锁存的目的。    
                                                      ![image](https://github.com/user-attachments/assets/69832fe9-66a7-4615-aafd-c75c49a556aa)

图.抢答模块  
此外，373输出转成数码管显示的数字也是一个问题。经过多次检索，我只找到bcd译码器，5421码译码器，并没有找到十进制地址输入式的译码器。所以我选择了74ls48n这款bcd码译码器，但是373输出的不是bcd码，所以就需要一个芯片把373输出的转bcd码。于是我选择了74ls148n，将373的输出端转成bcd码，但是74ls148n的输入输出都是高电平有效（例如输入111111110，输出则为1110），而我们需要输出为第1位应该为0001才能被74ls48n译码。因此我在74ls148n的输出端加了非门，全部取反再输出给74ls48n译码，译码结束后输出给数码管（3161as）.    
    ![image](https://github.com/user-attachments/assets/82a34d8b-eb0b-4860-8b09-a6b114123c64)
![image](https://github.com/user-attachments/assets/40afb741-6bb4-4ef4-8b8b-1f858db6efb6)

图.抢答模块

## 自定义倒计时模块：
  将74ls373的锁存端信号与加法计数按键信号输入一个二输入与门，将锁存端的信号取反再和时钟信号输入。这两个与门的输出再接入一个或门，或门输出给74ls190计数端，这样就实现了按键计数和时钟计数间的切换。当锁存端为锁存状态即有选手抢答的状态，开始答题倒计时。当锁存端为筹办状态，即无选手抢答时，不开始倒计时。正计数与负计数模式的转化类似，74ls190的加减法计数控制引脚接一个上拉电阻，将373锁存端信号取反接上拉电阻负极，当锁存端低电平时为正计数模式，当锁存端低电平时，为负计数模式。正计数和按键计数对应，负计数和时钟信号计数对应，四种模式会两两切换。
将74ls373的锁存端信号与加法计数按键信号输入一个二输入与门，将锁存端的信号取反再和时钟信号输入。这两个与门的输出再接入一个或门，或门输出给74ls190计数端，这样就实现了按键计数和时钟计数间的切换。当锁存端为锁存状态即有选手抢答的状态，开始答题倒计时。当锁存端为筹办状态，即无选手抢答时，不开始倒计时.    
![image](https://github.com/user-attachments/assets/337fff7c-b6f1-453e-85a7-d025cfb52e5f)  
图.自定义倒计时模块    
## 抢答十秒倒计时模块：
   使用两个74ls190n级联计数，达到两位计数。该模块和自定义倒计时模块不同，只有倒计时模式没有正计数模式。将开始键的信号接非门输入，非门输出给74ls190n的载入脚（load）。开始按键按下时，74ls190n的载入脚低电平，置数至和输入端相同，开始十秒倒计时。74ls190n的rco引脚输出电平和时钟信号以及373的锁存信号相与输出给74ls190n的时钟信号脚，使其倒计时到达00时停止计时，有选手抢答时停止计时。同时rco的输出信号还交与led灯，rco输出低电平时灯亮。
## 在抢答模块中锁存端若干或门与其他的模块交互：
  下图中83号线路为373锁存端输出信号相与，当没有人抢答时输出高电平，有人抢答时输出低电平。该信号再和复位按键信号输入或门，有选手抢答后，再按下复位键即可将锁存使能端置高电平，使输出为0，此或门输出信号给下个或门输入的同时还输出给自定义倒计时模块的加减法控制端和载入端，达到倒计时和正计数模式的切换。
  下一个或门输入端接上一个或门输入端和开始按键信号，当有开始按键按下时，会对选手编号数码管进行复位。

![image](https://github.com/user-attachments/assets/51db5e5b-5c3f-4d14-972b-716905e3ca97)  
图.抢答模块中的两个或门
# 三、仿真结果：
使用Multisim 14.0进行仿真，我设计了一个抢答器系统，可以实现以下任务：主持人可以通过控制开关手动清零和复位。当主持人按下开始按键时，抢答器开始运行，显示倒计时为10秒。如果抢答超时，系统会提示超时，同时LED灯会亮起。规定时间内抢答有效，同时倒计时会暂停，直到主持人将系统清零为止。如果选手答题超时，即倒计时为“00”，系统也会提示超时，并且LED灯会亮起。
![image](https://github.com/user-attachments/assets/96dcd779-349b-4d27-bcc7-c676765c548e)
![image](https://github.com/user-attachments/assets/c57c9792-eb92-4168-abc3-1f9661af92df)
# 四、软件设计
使用嘉立创标准版软件作为设计平台，它是一款国产的PCB制图软件，实现了原理图与PCB的设计功能。在制作PCB时，通过在丝印层上写上班级和姓名等信息，使得制作的PCB板具有个性化和标识性。最后，通过在嘉立创下单平台下单，生成PCB文件并进行生产加工。此方案旨在使用国产软件，提高自主研发设计能力，同时也可以有效地控制制作成本，是一种具有实际应用意义的设计方案。以下是嘉立创平台设计的原理图以及PCB图：
![image](https://github.com/user-attachments/assets/d27ff7d7-5554-40bc-875d-fe47469e8b0d)

图.原理图  
![image](https://github.com/user-attachments/assets/a5c5da2c-92a7-47ec-8d02-22c7198eac21)
 
图.自定义倒计时模块  
![image](https://github.com/user-attachments/assets/ddf7d69b-43cf-492d-9cf2-62c329cfb4bd)

图.抢答模块与抢答倒计时原理图  
![image](https://github.com/user-attachments/assets/b493aa37-3aac-48a3-bf39-50e44820fd39)

图.PCB顶层  
![image](https://github.com/user-attachments/assets/63dfc612-f28e-4e34-9333-a9677222826f)

图.PCB底层  
